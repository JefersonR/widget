<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Clicksign : Widget">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Clicksign</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/clicksign/widget">View on GitHub</a>

          <h1 id="project_title">Clicksign</h1>
          <h2 id="project_tagline">Widget</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/clicksign/widget/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/clicksign/widget/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="%C3%8Dndice" class="anchor" href="#%C3%8Dndice"><span class="octicon octicon-link"></span></a>Índice</h1>

<ul>
<li><a href="#introducao">Introdução</a></li>
<li><a href="#suporte">Suporte</a></li>
<li><a href="#funcionamento">Funcionamento</a></li>
<li><a href="#autenticacao">Autenticação</a></li>
<li><a href="#opcoes">Opções</a></li>
<li><a href="#versao">Versão</a></li>
<li><a href="#exemplo">Exemplo</a></li>
</ul><h1>
<a name="introdu%C3%A7%C3%A3o" class="anchor" href="#introdu%C3%A7%C3%A3o"><span class="octicon octicon-link"></span></a>
<a name="introducao"></a>Introdução</h1>

<p>Muitas vezes um documento precisa ser assinado dentro de uma aplicação.  Para
isso, a Clicksign desenvolveu um componente que pode ser instalado dentro de
outras páginas eletrônicas.  Este tipo de componente é tradicionalmente chamado
de <strong>widget</strong>.  O uso do <em>widget</em> traz as seguintes vantagens:</p>

<ul>
<li>Não interrompe um fluxo em andamento</li>
<li>Evita a troca de contexto do usuário</li>
<li>Oferece uma experiência mais consistênte</li>
</ul><p>Para facilitar a sua vida, a Clicksign já fez a parte difícil e programou um
componente extremamente simples de usar que realiza as partes mais complicadas
desse processo.  Apesar da facilidade, gostamos de deixar claro o que fazemos e
como fazemos, por isto, na próxima seção explicaremos como nosso componente
funciona.  Sinta-se livre para propor melhorias, analisar o código fonte ou
apenas questionar o desenvolvimento através da <a href="https://github.com/clicksign/widget">página do
projeto</a>.</p>

<h1>
<a name="funcionamento" class="anchor" href="#funcionamento"><span class="octicon octicon-link"></span></a>
<a name="funcionamento"></a>Funcionamento</h1>

<p>O <em>widget</em> é composto de 3 partes:</p>

<ol>
<li>Um biblioteca <em>javascript</em> que você deverá adicionar à sua página;</li>
<li>Um <em>iframe</em> que será criado pela biblioteca acima no <em>DOM</em> de sua página;</li>
<li>Um código <em>HTML</em> que será o corpo do <em>iframe</em> acima;</li>
</ol><p>Abaixo iremos explicar como estes três componentes interagem para prover a
funcionalidade esperada, bem como qual as etapas necessárias para você colocar o
<em>widget</em> funcionando em sua aplicação.</p>

<h2>
<a name="passo-1-carregar-a-biblioteca" class="anchor" href="#passo-1-carregar-a-biblioteca"><span class="octicon octicon-link"></span></a>Passo 1: carregar a biblioteca</h2>

<p>A biblioteca <em>javascript</em> da Clicksign precisa ser incluída no corpo da página.
O arquivo pode ser copiado para seu próprio domínio ou você pode utilizar a CDN
da Clicksign.  Recomendamos utilizar a CDN da Clicksign pois você será
beneficiado pelas correções automáticas que efetuamos ao descobrir alguma falha
na biblioteca.  Todas as correções visam manter compatibilidade dentro da mesma
versão.  Uma alteração que quebre compatibilidade só pode ser efetuada em uma
nova versão da biblioteca.  Mais detalhas em <a href="#versao">versão</a>.</p>

<p><img src="https://raw.githubusercontent.com/clicksign/widget/master/images/flow-1.png" alt="Carregando a
biblioteca"></p>

<h2>
<a name="passo-2-configurar-o-widget" class="anchor" href="#passo-2-configurar-o-widget"><span class="octicon octicon-link"></span></a>Passo 2: configurar o <em>widget</em>
</h2>

<p>A biblioteca da Clicksign irá criar um objeto <code>clicksign</code> dentro do escopo
padrão, <code>window</code>.  Para que o <em>widget</em> seja montado dentro da página você
necessita chamar a função <code>configure</code> no objeto <code>clicksign</code>.  Você pode conferir
os parâmetros da função <code>configure</code> nas <a href="#opcoes">opções</a>.</p>

<p><img src="https://raw.githubusercontent.com/clicksign/widget/master/images/flow-2.png" alt="Configurando a
biblioteca"></p>

<p>Ao chamar a função <code>configure</code>, será adicionado um <em>iframe</em> dentro de um dos
elementos da página.  O <em>iframe</em> irá carregar o conteúdo da Clicksign, este
conteúdo irá executar em contexto próprio, portanto nem o <em>widget</em>, nem a página
que o carrega, podem manipular os elementos do outro.</p>

<p><img src="https://raw.githubusercontent.com/clicksign/widget/master/images/flow-3.png" alt="Montando o
IFRAME"></p>

<p>O <em>widget</em> possui fluxo de navegação independente, isto possibilita à Clicksign
realizar as assinaturas em múltiplas requisições.</p>

<p><img src="https://raw.githubusercontent.com/clicksign/widget/master/images/flow-4.png" alt="Demonstrando
fluxo"></p>

<h2>
<a name="passo-3-capturar-uma-assinatura" class="anchor" href="#passo-3-capturar-uma-assinatura"><span class="octicon octicon-link"></span></a>Passo 3: capturar uma assinatura</h2>

<p>Para aplicações que necessitam <em>reagir</em> a um evento de assinatura, o <em>widget</em>
fornece uma chamada de <em>callback</em> que será executada dentro do contexto da
página.  Esta é a função do parâmetro <code>callback</code>.  Você pode conferir a
utilização do parâmetro <code>callback</code> nas <a href="#opcoes">opções</a>.</p>

<p><img src="https://raw.githubusercontent.com/clicksign/widget/master/images/flow-5.png" alt="Capturando
assinatura"></p>

<h1>
<a name="suporte" class="anchor" href="#suporte"><span class="octicon octicon-link"></span></a>
<a name="suporte"></a>Suporte</h1>

<p>Devido ao custo de desenvolvimento e possível perda de usabilidade, o <em>widget</em>
da Clicksign oferece suporte oficial apenas aos navegadores mais utilizados no
mercado.  Realizamos testes de compatibilidade com os seguintes navegadores
abaixo listados:</p>

<ul>
<li>Internet Explorer 9</li>
<li>Internet Explorer 10 </li>
<li>Internet Explorer 11</li>
<li>Chrome 36</li>
<li>Chrome 37</li>
<li>Firefox 31</li>
<li>Firefox 32</li>
<li>Safari 7</li>
<li>Opera 23</li>
<li>Opera 24</li>
</ul><p>Se você utiliza algum navegador que não conste nesta lista não significa que o
<em>widget</em> da Clicksign não funcionará adequadamente, significa apenas que não
realizamos testes de compatibilidade com o navegador.  Caso seja necessário que
a Clicksign suporte oficialmente o navegador, solicite que a equipe de
desenvolvimento o adicione como um navegador homologado através de
<a href="mailto:suporte@clicksign.com">suporte@clicksign.com</a>.</p>

<h1>
<a name="autentica%C3%A7%C3%A3o" class="anchor" href="#autentica%C3%A7%C3%A3o"><span class="octicon octicon-link"></span></a>
<a name="autenticacao"></a>Autenticação</h1>

<p>A autenticação do usuário é realizada através de um <strong>token</strong> enviado ao e-mail
que foi solicitado a assinatura.  Apenas desta forma nós podemos nos certifica
de que é o dono do e-mail quem está tentado realizar a assinatura.</p>

<p>O <em>token</em> é gerado e enviado através da Clicksign no momento em que o conteúdo
do <em>iframe</em> é solicitado aos nossos servidores.  Abaixo segue um diagrama
  representando o momento e o algoritmo utilizado.</p>

<p><img src="https://raw.githubusercontent.com/clicksign/widget/master/images/flow-6.png" alt="Envio de
token"></p>

<p>O <em>token</em> é composto de 4 letras, exceto vogais.  Ele possui duração de 10
minutos, após este período, caso o <em>widget</em> seja recarregado, um novo <em>token</em>
será gerado e enviado, o mesmo ocorre caso o usuário solicitar o reenvio do
<em>token</em>.</p>

<h1>
<a name="op%C3%A7%C3%B5es" class="anchor" href="#op%C3%A7%C3%B5es"><span class="octicon octicon-link"></span></a>
<a name="opcoes"></a>Opções</h1>

<p>A realizar a configuração você pode parametrizar alguns propriedades do
<em>widget</em>.  A parametrização de algumas propriedades é obrigatória, outras
possuem valores padrão adequados para o ambiente de produção.</p>

<table>
<thead><tr>
<th>Propriedade</th>
<th align="center">Obrigatório</th>
<th>Opções</th>
<th>Valor padrão</th>
</tr></thead>
<tbody>
<tr>
<td>container</td>
<td align="center">x</td>
<td>DOM ID</td>
<td></td>
</tr>
<tr>
<td>key</td>
<td align="center">x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>signer.email</td>
<td align="center">x</td>
<td>E-mail</td>
<td></td>
</tr>
<tr>
<td>signer.display_name</td>
<td align="center"></td>
<td></td>
<td></td>
</tr>
<tr>
<td>signer.documentation</td>
<td align="center"></td>
<td></td>
<td></td>
</tr>
<tr>
<td>protocol</td>
<td align="center"></td>
<td>HTTP ou HTTPS</td>
<td>HTTP</td>
</tr>
<tr>
<td>host</td>
<td align="center"></td>
<td>URL</td>
<td>widget.clicksign.com</td>
</tr>
<tr>
<td>width</td>
<td align="center"></td>
<td>600+</td>
<td>800</td>
</tr>
<tr>
<td>height</td>
<td align="center"></td>
<td>500+</td>
<td>600</td>
</tr>
</tbody>
</table><dl>
<dt>container</dt>
  <dd>ID na DOM do elemento no qual o iframe será inserido</dd>
  <dt>protocol</dt>
  <dd>Protocolo a ser utilizado na montagem do iframe</dd>
  <dt>host</dt>
  <dd>Host a ser utilizado na montagem do iframe</dd>
  <dt>key</dt>
  <dd>Chave do documento a ser assinado</dd>
  <dt>signer.email</dt>
  <dd>E-mail do signatário</dd>
  <dt>signer.display_name</dt>
  <dd>Nome signatário para ser auto-preenchido</dd>
  <dt>signer.documentation</dt>
  <dd>CPF do signatário para ser auto-preenchido</dd>
  <dt>width</dt>
  <dd>Largura em pixels do iframe</dd>
  <dt>height</dt>
  <dd>Altura em pixels do iframe</dd>
</dl><p>Segue abaixo um exemplo de como essa chamada poderia ser realizada para montar
um <em>wiget</em> dentro do elemento do DOM ID <code>signature-box</code> para o usuário com
e-mail <code>john.dow@example.com</code> assinar no ambiente de demonstração com
largura de 900 <em>pixels</em> e altura de 1000 <em>pixels</em>.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">clicksign</span><span class="p">.</span><span class="nx">configure</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span> <span class="s2">"signature-box"</span><span class="p">,</span>
  <span class="nx">key</span><span class="o">:</span> <span class="s2">"0123-4567-89AB-CDEF"</span><span class="p">,</span>
  <span class="nx">signer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">email</span><span class="o">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
    <span class="nx">display_name</span><span class="o">:</span> <span class="s2">"John Doe"</span><span class="p">,</span>
    <span class="nx">documentation</span><span class="o">:</span> <span class="s2">"01234567890"</span>
  <span class="p">},</span>
  <span class="nx">host</span><span class="o">:</span> <span class="s2">"widget.clicksign-demo.com"</span><span class="p">,</span>
  <span class="nx">width</span><span class="o">:</span> <span class="mi">900</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">1000</span>
</pre></div>

<h1>
<a name="vers%C3%A3o" class="anchor" href="#vers%C3%A3o"><span class="octicon octicon-link"></span></a>
<a name="versao"></a>Versão</h1>

<p>O controle de versão do <em>widget</em> é realizado através da arquivo <em>javascript</em> que
você carregar na aplição.  Utilizamos apenas um único número para controle de
versão, caso houver alguma quebra de funcionalidade, o número da versão será
acrescido em um, do contrário, apenas atualizaremos a versão disponível, p.e.:</p>

<table>
<thead><tr>
<th>Alteração</th>
<th align="center">Versão</th>
</tr></thead>
<tbody>
<tr>
<td>Versão atual</td>
<td align="center">1</td>
</tr>
<tr>
<td>Correção de bug em callback</td>
<td align="center">1</td>
</tr>
<tr>
<td>Adição callbacks para casos de erro</td>
<td align="center">1</td>
</tr>
<tr>
<td>Alteração de ordem de chamado de callback</td>
<td align="center">2</td>
</tr>
</tbody>
</table><p>O nome do arquivo determina a versão, p.e.: <code>clicksign-v1.js</code> é a versão 1,
<code>clicksign-v2.js</code> e a versão 2. Você também pode utilizar a propriedade
<code>version</code> do objeto <code>clicksign</code>.  </p>

<h1>
<a name="exemplo" class="anchor" href="#exemplo"><span class="octicon octicon-link"></span></a>
<a name="exemplo"></a>Exemplo</h1>

<p>No diretório <code>examples/</code> há um exemplo de uso do widget escrito em
<a href="ruby-lang.org">ruby</a>.  Para iniciar o exemplo certifique-se de que estão
instalados:</p>

<ul>
<li>Ruby 2.1.2</li>
<li>Rubygems</li>
<li>Bundler</li>
</ul><p>Instale as dependências:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span><span class="nb">cd </span>examples/
<span class="nv">$ </span>bundle install
</pre></div>

<p>O servidor de exemplo utiliza API da Clicksign para realizar o <em>upload</em> dos
documentos e criar a lista de assinatura.  Para fazer uso desta aplicação você
precisa de um <strong>access token</strong> configurado no servidor para o qual deseja enviar
as requisições.  O <strong>access token</strong> é disponibilizado pela Clicksign para
desenvolvedores que foram previamente autorizados.  Para solicitar um <strong>access
token</strong> envie um e-mail para <a href="mailto:suporte@clicksign.com">suporte@clicksign.com</a>. O controle do <strong>access
token</strong> é feito através da variável de ambiente <code>ACCESS_TOKEN</code>.</p>

<p>A aplicação de exemplo pode ser configurada para acessar outro servidor que não
seja o servidor de produção da Clicksign, isto pode ser útil caso você deseje
realizar testes em outros ambientes, como <em>stage</em> ou <em>demo</em>.  O controle do
<em>host</em> que será direcionada as requisições é feito pela variável de ambiente
<code>HOST</code>.  O <em>host</em> padrão é <code>widget.clicksign.com</code>.</p>

<p>O protocolo de uso da API também pode ser configurado através da variável de
ambiente <code>PROTOCOL</code>.  O protocolo padrão é <code>HTTPS</code>.</p>

<table>
<thead><tr>
<th>Variável</th>
<th>Valor padrão</th>
<th align="center">Obrigatório</th>
</tr></thead>
<tbody>
<tr>
<td>ACCESS_TOKEN</td>
<td></td>
<td align="center">x</td>
</tr>
<tr>
<td>HOST</td>
<td>widget.clicksign.com</td>
<td align="center"></td>
</tr>
<tr>
<td>PROTOCOL</td>
<td>HTTPS</td>
<td align="center"></td>
</tr>
</tbody>
</table><p>Para iniciar o servidor é necessário interpretar o arquivo <code>api-client.rb</code>
com o interpretador Ruby.  Segue abaixo um exemplo de como proceder em um
terminal <em>Unix</em>.</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span><span class="nb">cd </span>examples/
<span class="nv">$ ACCESS_TOKEN</span><span class="o">=</span>seu-token ruby api-client.rb
</pre></div>

<p>O servidor de exemplo executará um <em>bind</em> na <strong>porta 4567</strong>.  Você poderá
acessa-lo em <a href="http://localhost:4567">http://localhost:4567</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Clicksign maintained by <a href="https://github.com/clicksign">clicksign</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
